#!/bin/sh

# Variables used in command construction
DUPLICITY_USER="<%= node["duplicity"]["user"] %>"
ARCHIVE="<%= node["duplicity"]["archive_dir"] %>"
S3_BUCKET="<%= node["duplicity"]["s3_bucket"] %>"
VOLUME_SIZE="<%= node["duplicity"]["volsize"] %>"
FULL_IF_OLDER_THAN="<%= node["duplicity"]["full_if_older_than"] %>" # create a new full backup every...
FULL_LIFE="<%= node["duplicity"]["full_life"] %>" # delete any backup older than this
KEEP_FULL="<%= node["duplicity"]["keep_full"] %>"  # How many full+inc cycle to keep

# Variables passed straight to duplicity
export TMPDIR="<%= node["duplicity"]["tmp_dir"] %>"
export PASSPHRASE="<%= node["duplicity"]["gpg_passphrase"] %>"
export AWS_ACCESS_KEY_ID="<%= node["duplicity"]["aws_key_id"] %>" 
export AWS_SECRET_ACCESS_KEY="<%= node["duplicity"]["aws_secret_access_key"] %>"
